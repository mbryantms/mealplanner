<div id="progress-section" hx-swap-oob="true">
{% if shopping_list.total_count > 0 %}
    <div class="bg-white rounded-lg shadow p-4">
        <div class="flex items-center justify-between mb-2">
            <span class="text-sm font-medium text-gray-700">Progress</span>
            <span class="text-sm text-gray-500">{{ shopping_list.checked_count }} of {{ shopping_list.total_count }} items</span>
        </div>
        <div class="w-full bg-gray-200 rounded-full h-3 overflow-hidden">
            <div class="bg-green-500 h-3 rounded-full transition-all duration-500 ease-out"
                 x-data="{ width: window.progressWidth ?? 0 }"
                 x-init="$nextTick(() => { width = {{ shopping_list.progress_percent }}; window.progressWidth = width; })"
                 :style="'width: ' + width + '%'"></div>
        </div>
        {% if shopping_list.checked_count > 0 %}
        <div class="mt-3 flex gap-2 text-sm">
            <form method="post" action="{% url 'shopping:clear_checked' shopping_list.pk %}"
                  hx-post="{% url 'shopping:clear_checked' shopping_list.pk %}"
                  hx-target="#items-container"
                  hx-swap="innerHTML">
                {% csrf_token %}
                <button type="submit" class="text-red-600 hover:text-red-800 hover:underline">
                    Clear checked
                </button>
            </form>
            <span class="text-gray-300">|</span>
            <form method="post" action="{% url 'shopping:uncheck_all' shopping_list.pk %}"
                  hx-post="{% url 'shopping:uncheck_all' shopping_list.pk %}"
                  hx-target="#items-container"
                  hx-swap="innerHTML">
                {% csrf_token %}
                <button type="submit" class="text-gray-600 hover:text-gray-800 hover:underline">
                    Uncheck all
                </button>
            </form>
        </div>
        {% endif %}
    </div>
{% endif %}
</div>
