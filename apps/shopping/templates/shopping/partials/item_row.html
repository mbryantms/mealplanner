{% load unit_tags %}
<li id="item-{{ item.pk }}" class="px-4 py-3 flex items-center gap-3 {% if item.checked %}bg-gray-50{% endif %}">
    <!-- Checkbox -->
    <button hx-post="{% url 'shopping:item_toggle' item.pk %}"
            hx-target="#item-{{ item.pk }}"
            hx-swap="outerHTML"
            class="flex-shrink-0 w-6 h-6 rounded-full border-2 flex items-center justify-center transition-colors
                   {% if item.checked %}border-green-500 bg-green-500 text-white{% else %}border-gray-300 hover:border-green-400{% endif %}">
        {% if item.checked %}
        <svg class="w-4 h-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="3" d="M5 13l4 4L19 7" />
        </svg>
        {% endif %}
    </button>

    <!-- Item details -->
    <div class="flex-grow min-w-0 {% if item.checked %}line-through text-gray-400{% else %}text-gray-900{% endif %}">
        <span class="font-medium">
            {% if item.quantity %}{{ item.quantity|floatformat:"-2" }}{% endif %}
            {% if item.unit %}{{ item.unit|pluralize_unit:item.quantity }}{% endif %}
        </span>
        {{ item.display_name }}
    </div>

    <!-- Delete button -->
    <button hx-post="{% url 'shopping:item_delete' item.pk %}"
            hx-target="#item-{{ item.pk }}"
            hx-swap="outerHTML"
            hx-confirm="Remove this item?"
            class="flex-shrink-0 text-gray-400 hover:text-red-500 transition-colors">
        <svg class="w-5 h-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" />
        </svg>
    </button>
</li>
